<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Module6Lecture3Task/README_CN.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Module6Lecture3Task/README_CN.md" />
              <option name="updatedContent" value="# Virtual Pet Application - 作业完成总结&#10;&#10;## 项目概述&#10;这是一个 JavaFX 虚拟宠物应用程序，宠物会跟随鼠标光标在画布上移动。&#10;&#10;## 已完成的功能（满分 6 分）&#10;&#10;### ✅ **1. 在画布上显示可爱的宠物图片（1分）**&#10;- **实现方式**：绘制了一个可爱的橙色小猫脸&#10;  - 圆形的头部（橙色）&#10;  - 三角形的耳朵（深橙色）&#10;  - 两只眼睛（黑色椭圆）&#10;  - 小鼻子（黑色椭圆）&#10;  - 微笑的嘴巴（黑色弧线）&#10;- **扩展功能**：如果在 `src/main/resources/` 目录下放置 `pet.png` 图片，程序会使用该图片&#10;&#10;### ✅ **2. 鼠标在画布上移动时，宠物向鼠标光标移动（1分）**&#10;- **实现方式**：&#10;  - 使用 `setOnMouseMoved` 事件处理器捕获鼠标移动&#10;  - 调用 `controller.handleMouseMoved(x, y)` 设置目标位置&#10;  - 宠物使用**三角函数**计算直接路径&#10;- **公式**：`moveX = (dx / distance) * SPEED`&#10;- **结果**：宠物平滑地直线移动向鼠标&#10;&#10;### ✅ **3. 宠物到达鼠标光标时停止移动（1分）**&#10;- **实现方式**：&#10;  - 每帧计算宠物与目标的距离：`distance = Math.sqrt(dx * dx + dy * dy)`&#10;  - 当距离小于 5 像素时停止移动&#10;  - 防止宠物在目标周围抖动&#10;- **代码位置**：`Pet.java` 的 `update()` 方法&#10;&#10;### ✅ **4. 鼠标光标移出画布时宠物停止移动（1分）**&#10;- **实现方式**：&#10;  - 使用 `setOnMouseExited` 事件处理器&#10;  - 调用 `controller.handleMouseExited()` 停止移动&#10;  - 设置 `isMoving = false` 标志&#10;&#10;### ✅ **5. 程序遵循 MVC 模式（2分）**&#10;&#10;#### **Model - Pet.java**&#10;- **职责**：&#10;  - 存储宠物的当前位置 (x, y)&#10;  - 存储目标位置 (targetX, targetY)&#10;  - 包含移动逻辑和速度控制&#10;  - 管理移动状态（isMoving）&#10;- **独立性**：没有任何 JavaFX 依赖，纯粹的数据和逻辑&#10;&#10;#### **View - PetView.java**&#10;- **职责**：&#10;  - 扩展 JavaFX Application 类&#10;  - 创建和管理 600x600 的画布&#10;  - 处理鼠标事件（MOUSE_MOVED, MOUSE_EXITED）&#10;  - 在画布上绘制宠物&#10;  - 使用 AnimationTimer 实现平滑动画&#10;- **特点**：包含所有 JavaFX 相关代码&#10;&#10;#### **Controller - PetController.java**&#10;- **职责**：&#10;  - 作为 Model 和 View 的中介&#10;  - 处理事件：`handleMouseMoved()` 和 `handleMouseExited()`&#10;  - 更新模型，然后通知视图更新&#10;  - 提供访问器方法&#10;- **独立性**：除了持有 View 引用外，不包含 JavaFX 特定代码&#10;&#10;## 技术实现亮点&#10;&#10;### 1. **平滑移动算法**&#10;使用归一化向量实现恒定速度移动：&#10;```java&#10;double dx = targetX - x;&#10;double dy = targetY - y;&#10;double distance = Math.sqrt(dx * dx + dy * dy);&#10;double moveX = (dx / distance) * SPEED;&#10;double moveY = (dy / distance) * SPEED;&#10;```&#10;&#10;### 2. **动画循环**&#10;使用 JavaFX 的 `AnimationTimer` 实现约 60 FPS 的流畅动画：&#10;- 每帧调用 `controller.update()`&#10;- Controller 更新 Model&#10;- Controller 通知 View 重绘&#10;&#10;### 3. **智能停止机制**&#10;- 设置停止距离阈值（5像素）&#10;- 避免宠物在目标周围来回抖动&#10;- 确保平滑的停止效果&#10;&#10;## 文件结构&#10;```&#10;Module6Lecture3Task/&#10;├── pom.xml                          # Maven 配置，包含 JavaFX 依赖&#10;├── README.md                        # 英文说明文档&#10;├── README_CN.md                     # 中文说明文档（本文件）&#10;└── src/main/&#10;    ├── java/&#10;    │   ├── Main.java                # 程序入口&#10;    │   ├── model/&#10;    │   │   └── Pet.java            # 模型：宠物位置和移动逻辑&#10;    │   ├── controller/&#10;    │   │   └── PetController.java  # 控制器：事件处理和协调&#10;    │   └── view/&#10;    │       └── PetView.java        # 视图：JavaFX UI 和绘图&#10;    └── resources/&#10;        ├── README.txt              # 关于自定义图片的说明&#10;        └── pet.png                 # 可选：自定义宠物图片&#10;```&#10;&#10;## 如何运行&#10;&#10;### 方法 1：使用 Maven（推荐）&#10;```bash&#10;cd C:\Users\cheny\IdeaProjects\OOP-Course\Module6Lecture3Task&#10;mvn clean javafx:run&#10;```&#10;&#10;### 方法 2：在 IntelliJ 中直接运行&#10;直接运行 `Main.java` 文件&#10;&#10;## 使用方法&#10;&#10;1. 运行程序&#10;2. 出现一个 600x600 的浅蓝色画布窗口&#10;3. 橙色小猫宠物出现在画布中央&#10;4. **移动鼠标到画布上** - 宠物会跟随你的光标！&#10;5. **移动鼠标到画布外** - 宠物停止移动&#10;6. 当宠物到达光标位置时会自动停止&#10;&#10;## 添加自定义宠物图片（可选）&#10;&#10;如果你想使用自己的宠物图片：&#10;1. 准备一张宠物图片（PNG 格式最佳）&#10;2. 将图片调整为大约 50x50 到 100x100 像素&#10;3. 将图片保存为 `pet.png`&#10;4. 放入 `src/main/resources/` 目录&#10;5. 运行程序 - 你的自定义宠物就会出现！&#10;&#10;## 程序特点&#10;&#10;✨ **平滑移动**：使用动画定时器实现 60 FPS 更新&#10;✨ **直线路径**：使用三角函数计算直线移动&#10;✨ **恒定速度**：归一化向量确保速度一致&#10;✨ **智能停止**：在 5 像素内停止，避免抖动&#10;✨ **清晰的 MVC**：关注点清晰分离&#10;✨ **可爱默认**：提供橙色小猫脸作为默认宠物&#10;✨ **即时响应**：立即响应鼠标移动&#10;&#10;## 评分标准对照&#10;&#10;| 要求 | 分值 | 完成情况 |&#10;|------|------|----------|&#10;| 1. 显示可爱宠物图片 | 1分 | ✅ 已完成（橙色小猫） |&#10;| 2. 宠物跟随鼠标移动 | 1分 | ✅ 已完成（三角函数计算） |&#10;| 3. 到达目标时停止 | 1分 | ✅ 已完成（距离检测） |&#10;| 4. 鼠标离开时停止 | 1分 | ✅ 已完成（事件处理） |&#10;| 5. 遵循 MVC 模式 | 2分 | ✅ 已完成（清晰分离） |&#10;| **总分** | **6分** | **✅ 6/6** |&#10;&#10;## 作业完成声明&#10;&#10;根据作业要求，我声明已完成以下所有项目：&#10;&#10;✅ **项目1**：可爱的宠物图片在画布上显示（橙色小猫脸，带耳朵、眼睛、鼻子和微笑）&#10;&#10;✅ **项目2**：当鼠标在画布上移动时，宠物向鼠标光标移动（使用三角函数计算直接路径）&#10;&#10;✅ **项目3**：宠物到达鼠标光标时停止移动（通过距离计算实现，停止阈值为5像素）&#10;&#10;✅ **项目4**：鼠标光标移出画布时宠物停止移动（通过 MOUSE_EXITED 事件实现）&#10;&#10;✅ **项目5**：程序遵循 MVC 模式，包含：&#10;   - **Model**: `Pet.java` - 存储宠物位置和移动逻辑&#10;   - **View**: `PetView.java` - JavaFX 界面、画布和绘图&#10;   - **Controller**: `PetController.java` - 处理事件和协调 Model/View&#10;&#10;**完成得分：6/6 分** ✅&#10;&#10;---&#10;作业完成时间：2025年11月21日&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Module6Lecture3Task/TROUBLESHOOTING.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Module6Lecture3Task/TROUBLESHOOTING.md" />
              <option name="updatedContent" value="# 如何解决 &quot;package javafx.animation does not exist&quot; 错误&#10;&#10;## 问题&#10;在 IntelliJ 中直接运行 Main.java 时出现：&#10;```&#10;java: package javafx.animation does not exist&#10;```&#10;&#10;## 原因&#10;IntelliJ 没有自动将 JavaFX Maven 依赖添加到类路径中。&#10;&#10;## 解决方案&#10;&#10;### 方法 1：使用 Maven 运行（最简单，推荐）✅&#10;&#10;在 IntelliJ 的终端中运行：&#10;```bash&#10;mvn javafx:run&#10;```&#10;&#10;这是最简单可靠的方式，无需任何额外配置。&#10;&#10;---&#10;&#10;### 方法 2：重新导入 Maven 项目&#10;&#10;1. 在 IntelliJ 中右键点击 `pom.xml`&#10;2. 选择 **Maven → Reload Project**（或 **Maven → Reimport**）&#10;3. 等待 Maven 重新下载和索引依赖&#10;4. 然后再次尝试运行 Main.java&#10;&#10;---&#10;&#10;### 方法 3：配置 IntelliJ 运行配置&#10;&#10;如果你坚持想在 IntelliJ 中直接运行 Main 类：&#10;&#10;#### 步骤 A：检查 Maven 依赖是否已加载&#10;1. 打开右侧的 **Maven** 工具窗口&#10;2. 点击刷新按钮 （Reload All Maven Projects）&#10;3. 展开 **Dependencies**，确认看到 `javafx-*` 相关依赖&#10;&#10;#### 步骤 B：添加 VM 选项到运行配置&#10;1. 点击菜单 **Run → Edit Configurations...**&#10;2. 选择你的 Main 运行配置（或创建一个新的）&#10;3. 点击 **Modify options**&#10;4. 勾选 **Add VM options**&#10;5. 在 **VM options** 字段中添加：&#10;   ```&#10;   --module-path &quot;C:\Users\cheny\.m2\repository\org\openjfx\javafx-controls\20.0.1;C:\Users\cheny\.m2\repository\org\openjfx\javafx-graphics\20.0.1;C:\Users\cheny\.m2\repository\org\openjfx\javafx-base\20.0.1&quot; --add-modules javafx.controls,javafx.graphics&#10;   ```&#10;6. 点击 **Apply** 和 **OK**&#10;7. 再次运行&#10;&#10;---&#10;&#10;### 方法 4：检查项目 SDK 设置&#10;&#10;1. **File → Project Structure**&#10;2. 选择 **Project**&#10;3. 确保 **SDK** 设置为 JDK 17&#10;4. 确保 **Language level** 也是 17&#10;5. 点击 **Modules**&#10;6. 选择 **Module6Lecture3Task**&#10;7. 在 **Dependencies** 标签页，确保看到 Maven 依赖&#10;&#10;---&#10;&#10;### 方法 5：清理 IntelliJ 缓存&#10;&#10;如果以上都不行，尝试清理缓存：&#10;1. **File → Invalidate Caches...**&#10;2. 勾选所有选项&#10;3. 点击 **Invalidate and Restart**&#10;4. IntelliJ 重启后，再次 **Maven → Reload Project**&#10;&#10;---&#10;&#10;## 最推荐的方式 ⭐&#10;&#10;**直接使用 Maven 命令运行**：&#10;&#10;在 IntelliJ 的终端窗口（Alt+F12）中输入：&#10;```bash&#10;mvn javafx:run&#10;```&#10;&#10;这样：&#10;- ✅ 不需要任何配置&#10;- ✅ 不会有模块警告&#10;- ✅ 总是使用正确的类路径&#10;- ✅ 与 pom.xml 保持同步&#10;&#10;---&#10;&#10;## 快速检查清单&#10;&#10;- [ ] pom.xml 包含 JavaFX 依赖 ✅（已确认）&#10;- [ ] Maven 已成功编译项目 ✅（已确认）&#10;- [ ] IntelliJ 已重新加载 Maven 项目&#10;- [ ] 可以看到 Maven 依赖在项目结构中&#10;- [ ] 使用 `mvn javafx:run` 可以正常运行 ✅&#10;&#10;## 验证是否修复&#10;&#10;运行以下命令测试：&#10;```bash&#10;mvn javafx:run&#10;```&#10;&#10;如果窗口打开并显示橙色小猫，说明一切正常！&#10;&#10;---&#10;&#10;## 如果还是不行&#10;&#10;如果以上所有方法都不行，请：&#10;1. 检查是否有防火墙阻止 Maven 下载依赖&#10;2. 检查 `C:\Users\cheny\.m2\repository\org\openjfx\` 目录是否存在且包含文件&#10;3. 尝试删除 `.m2\repository\org\openjfx` 文件夹，然后重新运行 `mvn clean install`&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Module6Lecture3Task/run.bat">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Module6Lecture3Task/run.bat" />
              <option name="updatedContent" value="@echo off&#10;REM Run the Virtual Pet application using Maven&#10;echo Starting Virtual Pet Application...&#10;echo.&#10;cd /d &quot;%~dp0&quot;&#10;call mvn javafx:run&#10;pause&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>